<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/logo_fav_icon.svg" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" href="../css/colors.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/pages/share.css">
    <link rel="stylesheet" href="../css/modals.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <title>Otter Space</title>
</head>
<body>
    <div class="modal--share-ranking-two" id="shareRanking">
        <div class="share-ranking__header">
            <div class="logo-ottter-sharing">
                <img src="../assets/logo/combination-mark_white.svg" alt="Logo_otter">
            </div>
            <div class="icon-sharing" id="closeIcon">
                <span class="material-icons-round button__icon-right">close</span>
            </div>
        </div>
        <div class="share-ranking__content">
            <div class="share-ranking__content__info">
                <div class="share-ranking__content__info__player">
                    <div class="share-ranking__content__info__player__text">
                        <h1 class="share-ranking__content__info__player__text__place-two">#2 Place</h1>
                        <h6 class="share-ranking__content__info__player__text__description">in the global ranking of the game Otter Space!</h6>
                    </div>
                    <div class="share-ranking__content__info__player__container">
                        <img class="share-ranking__content__info__player__container__image" src="../assets/images/players/wwag.png" alt="avatar">
                        <div class="info-share-ranking">
                            <span class="name_player_share-info">Estagiario</span>
                            <span class="nick_player_share-info">etomiyos</span>
                        </div> 
                    </div>
                </div>
                <div class="share-ranking__content__info__action">
                    <button id="downloadButton" class="button button--secondary">
                        <span class="button__text font-body-regular-bold">Download</span>
                        <span class="material-icons-round button__icon-right">file_download</span>
                    </button>
                </div>
            </div>
            <div class="share-ranking__content__illustration">
                <img id="trophyImage" src="../assets/images/tournament/trophy-dynamic-premium-big-silver.png" alt="trophy-2">
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/dom-to-image@2.6.0/dist/dom-to-image.min.js"></script>
    <script>
        document.getElementById('downloadButton').addEventListener('click', function () {
            const button = document.getElementById('downloadButton');
            const closeIcon = document.getElementById('closeIcon');

            button.style.display = 'none'; // Oculta o botão antes de capturar a imagem
            closeIcon.style.display = 'none'; // Oculta o ícone de fechamento

            const node = document.getElementById('shareRanking');
            
            domtoimage.toPng(node)
                .then(function (dataUrl) {
                    let link = document.createElement('a');
                    link.download = 'otter_space.png';
                    link.href = dataUrl;
                    link.click();

                    button.style.display = ''; // Mostra o botão novamente após a captura
                    closeIcon.style.display = ''; // Mostra o ícone de fechamento novamente
                })
                .catch(function (error) {
                    console.error('Oops, something went wrong!', error);
                    button.style.display = ''; // Mostra o botão novamente em caso de erro
                    closeIcon.style.display = ''; // Mostra o ícone de fechamento novamente em caso de erro
                });
        });
    </script>
</body>
</html>
